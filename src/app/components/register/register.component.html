
<section class="bg-main-light shadow p-5 my-2 rounded-4 w-75 mx-auto">
<h1 class="h2 text-main">Register Now:</h1>


<form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">

<div class="my-2">
    <label for="name">name</label>
    <input [ngClass]="{
'is-invalid':registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) ,
'is-valid':!registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)

    }" id="name" type="text" class="form-control" formControlName="name" >

    @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) ) {

    <div class="alert alert-danger w-50">
        @if (registerForm.get('name')?.getError('required')) {
            <p class="m-0">Name is Required.</p>
        }
@else if (registerForm.get('name')?.getError('minlength')) {
    <p class="m-0">Name should be more than or equal 3 chars.</p>

}
@else if (registerForm.get('name')?.getError('maxlength')) {
    <p class="m-0">Name should be less than or equal 20 chars..</p>

}
    </div>

    }

</div>

<div class="my-2">
    <label for="email">email</label>
    <input [ngClass]="{
'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)

    }" id="email" type="email" class="form-control" formControlName ="email" >

@if (registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty) ) {
<div class="alert alert-danger w-50">
@if (registerForm.get('email')?.getError('required')) {
          <p class="m-0">Email Required</p>

}
  

@else if (registerForm.get('email')?.getError('email')) {
        <p class="m=0">Enter Vaid Email</p>
}

</div>

}





</div>

<div class="my-2">
    <label for="phone">phone</label>
    <input [ngClass]="{
'is-invalid':registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)  ,
'is-valid':!registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)
    }" id="phone" type="tel" class="form-control" formControlName ="phone" >

@if (registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)) {

    <div class="alert alert-danger w-50">
      @if (registerForm.get('phone')?.getError('required')) {
<p class="m-0">Phone is Required</p>

      }  
@else if (registerForm.get('phone')?.getError('pattern')) {
    <p class="m-0">Enter Valid Phone</p>

}

      
</div>





}
</div>

<div class="my-2">
    <label for="password">password</label>
    <input [ngClass]="{
        'is-valid':!registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty) ,
        'is-invalid':registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)
    }" id="password" type="password" class="form-control" formControlName="password" >


@if (registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty))
 {
    <div class="alert alert-danger w-50">
      @if (registerForm.get('password')?.getError('required')) {
   
        <p class="m-0"> password is Required </p>    
    }
      @else if (registerForm.get('password')?.getError('pattern')) {
        <p class="m-0">Enter Valid password</p>
    
    }
    
</div>
}

</div>

<div class="my-2">
    <label for="rePassword">rePassword</label>
    <input [ngClass]="{
'is-valid':!registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty) ,
'is-invalid':registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)

    }" id="rePassword" type="password" class="form-control"formControlName="rePassword" >

@if ( registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) {
    <p class="alert alert-danger"> password confirmation is incorrect</p>
}

</div>
<button  type="submit" class="btn-main d-block ms-auto">Register
     
@if (isLoading) {
        <span><i class="fas fa-spin fa-spinner"></i></span>

}

</button>

@if (errMsg) {
       <p class="alert alert-danger w-50 m-0">{{this.errMsg}}</p>
 
}


@if(successMsg) {
    <p class="alert alert-success w-50 m-0">Success</p>
  
}




</form>
</section>